<!DOCTYPE html>

<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='happy.css') }}">
    
    <meta charset="utf-8">
</head>

<body>
    
    <div class="player">
        <div class="player__header">
            <div class="player__img player__img--absolute slider"><button class="player__button player__button--absolute--nw playlist"><img src="http://physical-authority.surge.sh/imgs/icon/playlist.svg" alt="playlist-icon"></button><button class="player__button player__button--absolute--center play"><img src="http://physical-authority.surge.sh/imgs/icon/play.svg" alt="play-icon"><img src="http://physical-authority.surge.sh/imgs/icon/pause.svg" alt="pause-icon"></button>
                <div class="slider__content">
                    <img class="img slider__img" src="{{ url_for('static', filename='aaj.jpeg') }}" alt="cover">
                    <img class="img slider__img" src="h/bom.jpeg" alt="cover">
                    <img class="img slider__img" src="h/ainvayi.jpeg" alt="cover">
                    <img class="img slider__img" src="h/balam.jpeg" alt="cover">
                    <img class="img slider__img" src="h/chikni.jpeg" alt="cover">
                    <img class="img slider__img" src="h/chitya.jpeg" alt="cover">
                    <img class="img slider__img" src="h/mauja.jpeg" alt="cover">
                    <img class="img slider__img" src="h/sonu.jpeg" alt="cover">
                    <img class="img slider__img" src="h/soty.jpeg" alt="cover">
                    <img class="img slider__img" src="h/tum.jpeg" alt="cover">
                </div>
            </div>
            <div class="player__controls"><button class="player__button back"><img class="img" src="http://physical-authority.surge.sh/imgs/icon/back.svg" alt="back-icon"></button>
                <p class="player__context slider__context"><strong class="slider__name"></strong><span class="player__title slider__title"></span></p><button class="player__button next"><img class="img" src="http://physical-authority.surge.sh/imgs/icon/next.svg" alt="next-icon"></button>
                <div class="progres">
                    <div class="progres__filled"></div>
                </div>
            </div>
        </div>
        <ul class="player__playlist list">
            <li class="player__song"><img class="player__img img" src="{{ url_for('static', filename='aaj.jpeg') }}" alt="cover">
                <p class="player__context"><b class="player__song-name">aaj ki raat</b><span class="flex"><span class="player__title">don</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="{{ url_for('static', filename='aaj.mp3') }}"></audio>
            </li>

            <li class="player__song"><img class="player__img img" src="h/bom.jpeg" alt="cover">
                <p class="player__context "><b class="player__song-name">bom diggy diggy<span class="uppercase"></span></b><span class="flex"><span class="player__title"></span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/bom_diggy.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/ainvayi.jpeg" alt="cover">
                <p class="player__context"><b class="player__song-name">Ainvayi Ainvayi</b><span class="flex"><span class="player__title">Band baja barat</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/ainvayi.mp3"></audio></li>


            <li class="player__song"><img class="player__img img" src="h/balam.jpeg" alt="cover">
                <p class="player__context"><b class="player__song-name">balam pichkari</b><span class="flex"><span class="player__title">yeh jawani hai deewani</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/balam_pichkari.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/chikni.jpeg" alt="cover">
                <p class="player__context "><b class="player__song-name">chini chameli</b><span class="flex"><span class="player__title">agnipath</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/chikni_chameli.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/chitya.jpeg" alt="cover">
                <p class="player__context"><b class="player__song-name">Chittiya kalaiyan</b><span class="flex"><span class="player__title">roy</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/chittiya_kaalaiya.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/mauja.jpeg" alt="cover">
                <p class="player__context "><b class="player__song-name">Mauja hi Mauja<span class="uppercase"></span></b><span class="flex"><span class="player__title">jab we met</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/mauja.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/sonu.jpeg" alt="cover">
                <p class="player__context "><b class="player__song-name">chote chote peg<span class="uppercase"></span></b><span class="flex"><span class="player__title">Sonu ki titu ki sweety</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/chote.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/soty.jpeg" alt="cover">
                <p class="player__context "><b class="player__song-name">Radha<span class="uppercase"></span></b><span class="flex"><span class="player__title">Student of the year</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/radha.mp3"></audio></li>

            <li class="player__song"><img class="player__img img" src="h/tum.jpeg" alt="cover">
                <p class="player__context"><b class="player__song-name">Tum hi ho bandhu</b><span class="flex"><span class="player__title">cocktail</span><span class="player__song-time"></span></span>
                </p><audio class="audio" src="happy_hindi/tum_hi_ho_bandhu.mp3"></audio></li>


        </ul>
    </div>
    <!-- <script type="text/javascript" charset="utf-8">
        // Designed by: Mauricio Bucardo
        // Original image: https://dribbble.com/shots/6957353-Music-Player-Widget
        "use strict";
        // add elemnts
        const bgBody = ["#e5e7e9", "#ff4545", "#f8ded3", "#ffc382", "#f5eda6", "#ffcbdc", "#dcf3f3"];
        const body = document.body;
        const player = document.querySelector(".player");
        const playerHeader = player.querySelector(".player__header");
        const playerControls = player.querySelector(".player__controls");
        const playerPlayList = player.querySelectorAll(".player__song");
        const playerSongs = player.querySelectorAll(".audio");
        const playButton = player.querySelector(".play");
        const nextButton = player.querySelector(".next");
        const backButton = player.querySelector(".back");
        const playlistButton = player.querySelector(".playlist");
        const slider = player.querySelector(".slider");
        const sliderContext = player.querySelector(".slider__context");
        const sliderName = sliderContext.querySelector(".slider__name");
        const sliderTitle = sliderContext.querySelector(".slider__title");
        const sliderContent = slider.querySelector(".slider__content");
        const sliderContentLength = playerPlayList.length - 1;
        const sliderWidth = 100;
        let left = 0;
        let count = 0;
        let song = playerSongs[count];
        let isPlay = false;
        const pauseIcon = playButton.querySelector("img[alt = 'pause-icon']");
        const playIcon = playButton.querySelector("img[alt = 'play-icon']");
        const progres = player.querySelector(".progres");
        const progresFilled = progres.querySelector(".progres__filled");
        let isMove = false;
        // creat functions
        function openPlayer() {
            playerHeader.classList.add("open-header");
            playerControls.classList.add("move");
            slider.classList.add("open-slider");
        }

        function closePlayer() {
            playerHeader.classList.remove("open-header");
            playerControls.classList.remove("move");
            slider.classList.remove("open-slider");
        }

        function next(index) {
            count = index || count;
            if (count == sliderContentLength) {
                count = count;
                return;
            }
            left = (count + 1) * sliderWidth;
            left = Math.min(left, (sliderContentLength) * sliderWidth);
            sliderContent.style.transform = `translate3d(-${left}%, 0, 0)`;
            count++;
            run();
        }

        function back(index) {
            count = index || count;
            if (count == 0) {
                count = count;
                return;
            }
            left = (count - 1) * sliderWidth;
            left = Math.max(0, left);
            sliderContent.style.transform = `translate3d(-${left}%, 0, 0)`;
            count--;
            run();
        }

        function changeSliderContext() {
            sliderContext.style.animationName = "opacity";
            sliderName.textContent = playerPlayList[count].querySelector(".player__title").textContent;
            sliderTitle.textContent = playerPlayList[count].querySelector(".player__song-name").textContent;
            if (sliderName.textContent.length > 16) {
                const textWrap = document.createElement("span");
                textWrap.className = "text-wrap";
                textWrap.innerHTML = sliderName.textContent + " " + sliderName.textContent;
                sliderName.innerHTML = "";
                sliderName.append(textWrap);
            }
            if (sliderTitle.textContent.length >= 18) {
                const textWrap = document.createElement("span");
                textWrap.className = "text-wrap";
                textWrap.innerHTML = sliderTitle.textContent + " " + sliderTitle.textContent;
                sliderTitle.innerHTML = "";
                sliderTitle.append(textWrap);
            }
        }

        function changeBgBody() {
            body.style.backgroundColor = bgBody[count];
        }

        function selectSong() {
            song = playerSongs[count];
            for (const item of playerSongs) {
                if (item != song) {
                    item.pause();
                    item.currentTime = 0;
                }
            }
            if (isPlay) song.play();
        }

        function run() {
            changeSliderContext();
            changeBgBody();
            selectSong();
        }

        function playSong() {
            if (song.paused) {
                song.play();
                playIcon.style.display = "none";
                pauseIcon.style.display = "block";
            } else {
                song.pause();
                isPlay = false;
                playIcon.style.display = "";
                pauseIcon.style.display = "";
            }
        }

        function progresUpdate() {
            const progresFilledWidth = (this.currentTime / this.duration) * 100 + "%";
            progresFilled.style.width = progresFilledWidth;
            if (isPlay && this.duration == this.currentTime) {
                next();
            }
            if (count == sliderContentLength && song.currentTime == song.duration) {
                playIcon.style.display = "block";
                pauseIcon.style.display = "";
                isPlay = false;
            }
        }

        function scurb(e) {
            // If we use e.offsetX, we have trouble setting the song time, when the mousemove is running
            const currentTime = ((e.clientX - progres.getBoundingClientRect().left) / progres.offsetWidth) * song.duration;
            song.currentTime = currentTime;
        }

        function durationSongs() {
            let min = parseInt(this.duration / 60);
            if (min < 10) min = "0" + min;
            let sec = parseInt(this.duration % 60);
            if (sec < 10) sec = "0" + sec;
            const playerSongTime = `${min}:${sec}`;
            this.closest(".player__song").querySelector(".player__song-time").append(playerSongTime);
        }
        changeSliderContext();
        // add events
        sliderContext.addEventListener("click", openPlayer);
        sliderContext.addEventListener("animationend", () => sliderContext.style.animationName = '');
        playlistButton.addEventListener("click", closePlayer);
        nextButton.addEventListener("click", () => {
            next(0)
        });
        backButton.addEventListener("click", () => {
            back(0)
        });
        playButton.addEventListener("click", () => {
            isPlay = true;
            playSong()
            song.play();
        });
        playerSongs.forEach(song => {
            song.addEventListener("loadeddata", durationSongs);
            song.addEventListener("timeupdate", progresUpdate);
        });
        progres.addEventListener("pointerdown", (e) => {
            scurb(e);
            isMove = true;
        });
        document.addEventListener("pointermove", (e) => {
            if (isMove) {
                scurb(e);
                song.muted = true;
            }
        });
        document.addEventListener("pointerup", () => {
            isMove = false;
            song.muted = false;
        });
        playerPlayList.forEach((item, index) => {
            item.addEventListener("click", function() {
                if (index > count) {
                    next(index - 1);
                    return;
                }
                if (index < count) {
                    back(index + 1);
                    return;
                }
            });
        });
    </script> -->
    <script src="{{url_for('static', filename='script.js')}}"></script>
</body>

</html>